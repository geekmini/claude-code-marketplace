---
name: specification
description: This skill should be used when the user asks to "generate a spec", "create specification document", "write feature spec", "document requirements", or mentions "specification phase". Generates a detailed specification document for implementation.
---

# Specification Phase

Generate a comprehensive specification document that serves as the source of truth for implementation. The spec captures all decisions from discovery and planning phases.

## Overview

The specification document:
- Consolidates all requirements and decisions
- Provides implementation checklist
- Tracks feature status (Draft → Approved → Implemented)
- Serves as reference during code review

## Process

### Step 1: Determine Spec Location

Ask user for spec file location:

```markdown
Where should the specification be saved?

Suggested: `spec/[feature-name].md`

Press Enter to accept, or specify a different path.
```

Create the `spec/` directory if it doesn't exist.

### Step 2: Generate Specification

Create the spec document with all gathered information:

```markdown
# [Feature Name] Specification

**Status**: Draft
**Created**: [date]
**Author**: [user/Claude]

## Overview

[1-2 paragraph description of the feature]

## Goals

- [Goal 1]
- [Goal 2]

## Data Model

### [Entity Name]

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| id | UUID | Yes | Primary key |
| [field] | [type] | [Yes/No] | [description] |

## API Endpoints

### [HTTP Method] [Path]

**Description**: [what this endpoint does]

**Authentication**: [required/public]

**Request**:
```json
{
  "field": "value"
}
```

**Response** (200):
```json
{
  "field": "value"
}
```

**Errors**:
- `400` - [description]
- `404` - [description]

## Business Rules

1. [Rule 1]
2. [Rule 2]

## Implementation Checklist

### Files to Create
- [ ] `path/to/file.ext` - [purpose]

### Files to Modify
- [ ] `path/to/file.ext` - [changes]

### Tests to Write
- [ ] Unit: [description]
- [ ] Integration: [description]

## Architecture Decision

**Selected**: [Option name]

**Rationale**: [why this option was chosen]

## Open Questions

- [Any unresolved items]

---

*Generated by dev-flow plugin*
```

### Step 3: Request Approval

Present the spec for review:

```markdown
## Specification Generated

**File**: `spec/[feature-name].md`

Please review the specification. When ready:
- **Approve** to proceed to implementation
- **Request changes** if modifications needed
```

### Step 4: Update Status

On approval, update the spec status:
- Change `**Status**: Draft` to `**Status**: Approved`
- Add approval timestamp

## Session State

Update `.dev-flow-session.json`:

```json
{
  "currentPhase": 4,
  "phaseName": "Implementation",
  "phases": {
    "3_specification": {
      "status": "completed",
      "output": {
        "specFile": "spec/feature-name.md",
        "specStatus": "approved",
        "approvedAt": "ISO-8601 timestamp"
      }
    }
  }
}
```

## Spec Lifecycle

| Status | Meaning |
|--------|---------|
| Draft | Initial generation, pending review |
| Approved | User approved, ready for implementation |
| Implemented | Code complete, tests passing |
| Merged | PR merged to main branch |

## Standalone Usage

When invoked directly:
1. Ask for context (feature name, requirements, architecture decision)
2. Generate the specification
3. Offer to continue: "Would you like to proceed to implementation?"

## Additional Resources

### Example Files

For spec document templates:
- **`examples/spec-template.md`** - Complete specification template with all sections
